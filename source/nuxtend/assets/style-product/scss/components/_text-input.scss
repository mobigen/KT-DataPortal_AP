//----------------------------------------------
// Text input
// ---------------------------------------------
// mixins
@mixin text-input {
  @include font-family("sans");
  @include font-size("14");
  @include font-weight("regular");
  position: relative;
  background-color: $ui-02;
  width: 100%;
  height: $button-height-md;
  padding: 0 $spacing-md;
  color: $text-01;
  border: 1px solid $line2;
  border-radius: $form-border-radius;
  transition: all $duration-fast-01 motion(standard, productive);
  outline: none;

  //IE에서 input focus 시 생기는 clear button 제거
  &::-ms-clear {
    display: none;
  }

  &:hover,
  &:focus {
    border-color: $primary;
    box-shadow: none;
  }

  // chrom에서 자동저장된 input의 배경컬러를 제어
  &:-webkit-autofill {
    -webkit-box-shadow: none;
  }

  &[disabled],
  &[disabled]:hover,
  &[disabled]:focus {
    cursor: not-allowed;
    background-color: $ui-05;
    border-color: $ui-04;
    opacity: 0.5;
    box-shadow: none;

    ~ .text-input-group__button {
      display: none;
    }
  }

  &[readonly],
  &[readonly]:hover,
  &[readonly]:focus {
    cursor: default;
    border-color: $ui-04;
    background-color: $ui-05;
    box-shadow: none;
  }

  &::placeholder {
    @include font-weight("light");
    color: #aaa;
  }
}

@mixin text-input--lg {
  @include font-size("16");
  height: $button-height-lg;
}

@mixin text-input--md {
  height: $button-height-md;
}

@mixin text-input--sm {
  @include font-size("13");
  height: $button-height-sm;
  padding: 0 $spacing-sm;
}

// -------------------------
// classes
// -------------------------
.text-input {
  @include text-input;
  background-color: #fff;
}

.text-input--lg {
  @include text-input--lg;
}

.text-input--md {
  @include text-input--md;
}

.text-input--sm {
  @include text-input--sm;
}

// -------------------------
// input + icon
// -------------------------
// TODO: IMA 반영시 주의해야할 점
// 1. .text-input-group__input -> .text-input 으로 변경
.text-input-group {
  display: flex;
  align-items: stretch;
  position: relative;

  .text-input {
    // 뒤에 button이 있는 경우
    &:not(&:last-child) {
      flex: 1 1 0%;
      min-width: 0;
      border-right: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    &:nth-last-child(3):not(div) {
      padding-right: ($spacing-xl * 2) - $spacing-3xs !important;
    }

    &:hover,
    &:focus,
    &:hover + .text-input-group__clear-button,
    &:focus + .text-input-group__clear-button {
      border-color: $primary;
    }
  }
}

.text-input-group__input {
  @include text-input;
  background: #fff;
}

.text-input-group__icon {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: $spacing-xs;
  width: rem(18px);
  height: rem(18px);
  border: none;
  padding: 0;
  z-index: z("float");

  .svg-icon {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  & ~ .text-input {
    $icon-spacing: 8px + 18px + 4px;
    padding-left: $icon-spacing;
  }
}

.text-input-group__clear-button {
  @include button-normal;
  width: rem(36px);
  height: auto;
  padding: 0;
  border: 1px solid $line2;
  border-left: 0;
  border-radius: 0;
  border-top-right-radius: $form-border-radius;
  border-bottom-right-radius: $form-border-radius;
  background-color: $ui-02;
  z-index: z("float");
  cursor: pointer;

  &:last-child {
    margin-right: $spacing-sm;
  }

  &:hover,
  &:focus,
  &:focus-visible:not(:disabled) {
    border-color: $line2;
    background-color: $ui-02;
  }
}

.text-input-group__search-button {
  min-width: rem(70px);
  height: auto;
  margin-left: $spacing-xs;
  border-radius: $form-border-radius;
  color: #fff;
  border-color: $gy-01;
  background-color: $gy-01;

  &:hover,
  &:focus {
    border-color: lighten($gy-01, 14%);
    background-color: lighten($gy-01, 14%);
  }

  .svg-icon {
    width: rem(22px);
    height: rem(22px);
    fill: currentColor;
  }
}

.text-input-group__button {
  height: auto;
  margin-left: $spacing-xs;
}

.text-input-group--lg {
  .text-input {
    @include text-input--lg;

    &:nth-last-child(3):not(div) {
      padding-right: $spacing-sm * 6 !important;
    }
  }

  .text-input-group__icon {
    left: $spacing-sm;

    & ~ .text-input {
      $icon-spacing: 12px + 20px + 4px; // left + width + text사이와의 여백
      padding-left: $icon-spacing;
    }
  }
  .text-input-group__clear-button {
    width: $button-height-lg;
  }
}

.text-input-group--sm {
  .text-input {
    @include text-input--sm;

    &:nth-last-child(3):not(div) {
      padding-right: $spacing-3xl - $spacing-3xs !important;
    }
  }

  .text-input-group__icon {
    left: $spacing-2xs;
    width: rem(14px);
    height: rem(14px);

    & ~ .text-input {
      $icon-spacing: 4px + 14px + 2px; // left + width + text사이와의 여백
      padding-left: $icon-spacing;
    }
  }

  .text-input-group__clear-button {
    width: $button-height-sm;
  }
}

.text-input-group--disabled {
  cursor: not-allowed;

  .text-input-group__clear-button,
  .text-input-group__search-button,
  .text-input-group__button {
    opacity: 0.4;
    cursor: not-allowed;
  }
  .svg-icon {
    opacity: 0.6;
  }
}

// -------------------------
// input + suffix
// -------------------------
.text-input-wrap {
  display: flex;
  align-items: center;
}

.text-input-wrap__suffix {
  margin-left: $spacing-2xs;
  color: $text-02;
  flex-shrink: 0;
}

.text-input-wrap__prefix {
  padding-right: $spacing-2xs;
  color: $text-02;
  overflow-wrap: break-word;
  word-break: keep-all;
}

// -------------------------
// input with range
// -------------------------
input[type="range"] + .text-input-wrap .text-input {
  width: rem(80px);
}

// -------------------------
// text edit + text input
// -------------------------
.text-edit {
  display: flex;
  align-items: center;
  padding: $spacing-2xs 0;
}

.text-edit__title {
  @include font-weight("regular");
  @include text-overflow();
}

.text-edit__button {
  margin-left: $spacing-2xs;
}
